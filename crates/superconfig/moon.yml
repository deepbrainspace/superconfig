type: 'library'
language: 'rust'
platform: 'system'
stack: 'backend'

# Project metadata  
tags: ['configuration', 'universal', 'multi-language', 'figment', 'enterprise']

tasks:
  # Core development tasks
  build:
    command: 'cargo build'
    inputs: 
      - 'src/**/*'
      - 'Cargo.toml'
  
  build-release:
    command: 'cargo build --release'
    inputs: 
      - 'src/**/*'
      - 'Cargo.toml'
    
  test:
    command: 'cargo test --all-features'
    inputs:
      - 'src/**/*'
      - 'tests/**/*'
      - 'Cargo.toml'
    
  test-doc:
    command: 'cargo test --doc'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
    
  # Code quality tasks
  clippy:
    command: 'cargo clippy --all-features -- -D warnings'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
    
  fmt:
    command: 'cargo fmt'
    inputs:
      - 'src/**/*'
    options:
      cache: false
      
  fmt-check:
    command: 'cargo fmt --check'
    inputs:
      - 'src/**/*'
    
  check:
    command: 'cargo check --all-features'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
    
  # Documentation tasks  
  doc:
    command: 'cargo doc --no-deps --all-features'
    inputs:
      - 'src/**/*'
      - 'Cargo.toml'
    
  doc-open:
    command: 'cargo doc --no-deps --all-features --open'
    deps: ['doc']
    options:
      cache: false
      
  # Security and maintenance tasks
  security-audit:
    command: 'cargo audit'
    inputs:
      - 'Cargo.lock'  # Re-run if dependencies change
    # Cache enabled - time-based invalidation handled by CI cache keys
      
  coverage:
    command: 'cargo tarpaulin --verbose --all-features --workspace --timeout 120 --out xml'
    options:
      cache: false  # Always generate fresh coverage
      
  outdated:
    command: 'cargo outdated'
    options:
      cache: false
      
  # Publishing tasks (actual publishing handled by GitHub Actions)
  publish-dry:
    command: 'cargo publish --dry-run --allow-dirty'
    deps: ['build', 'test', 'test-doc', 'clippy', 'fmt-check']

# Project dependencies and relationships  
# dependsOn:
#   - id: 'workspace-root'
#     scope: 'self'